plugins {
    id 'com.gradle.plugin-publish' version '0.9.9'
    id 'java-gradle-plugin'
}

apply plugin: 'com.gradle.plugin-publish'
apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'codenarc'

allprojects {
    sourceCompatibility = 1.7
    targetCompatibility = 1.7
}

dependencies {
    compile gradleApi()
    compile 'net.sf.saxon:Saxon-HE:9.8.0-14'
    compile 'xml-resolver:xml-resolver:1.2'

    testCompile('org.spockframework:spock-core:1.1-groovy-2.4-rc-3') {
        exclude group: 'org.codehaus.groovy'
    }

    testCompile('org.jsoup:jsoup:1.11.3')

    testImplementation gradleTestKit()
}

repositories {
    jcenter()
}

group = 'com.github.eerohele'
version = '0.7.0'

test {
    systemProperty 'examples.dir', new File(projectDir, 'examples')
}

wrapper {
    gradleVersion = '5.5.1'
}

codenarc {
    toolVersion = '0.24.1'
    configFile = file('config/codenarc/codenarc.groovy')
}

pluginBundle {
    website = 'https://github.com/eerohele/saxon-gradle'
    vcsUrl = 'https://github.com/eerohele/saxon-gradle.git'
    description = 'A Gradle plugin for running Saxon'
    tags = ['saxon', 'xslt', 'documentation']

    plugins {
        SaxonPlugin {
            id = 'com.github.eerohele.saxon-gradle'
            displayName = 'Saxon Gradle Plugin'
        }
    }
}

publishPlugins.dependsOn check
